{"application":"adskclouddeployment","description":"This pipeline code is stored in https://git.autodesk.com/forge-cd-services/spinnaker-alb-pipeline","expectedArtifacts":[],"keepWaitingPipelines":false,"limitConcurrent":false,"name":"create-lb-pipeline-v1-testing","parallel":false,"parameterConfig":[{"default":"","description":"Business service for the application (eg: BIMCHECK)","hasOptions":false,"label":"","name":"business_service","options":[],"pinned":false,"required":true},{"default":"","description":"AWS Region Code (eg: us-west-2)","hasOptions":false,"label":"","name":"region","options":[],"pinned":false,"required":true},{"default":"","description":"The deployment environment - dev, stg, prd, or sandbox","hasOptions":false,"label":"","name":"env","options":[],"pinned":false,"required":true},{"default":"","description":"The name of the Spinnaker pipeline","hasOptions":false,"label":"","name":"pipeline_name","options":[],"pinned":false,"required":true},{"default":"","description":"The 12-digit AWS account where the LB will be deployed","hasOptions":false,"label":"","name":"account","options":[],"pinned":false,"required":true},{"default":"","description":"The IAM role ARN to be used to terraform the LB. The context role MUST have AssumeRole allows for this role.","hasOptions":false,"label":"","name":"role_arn","options":[],"pinned":false,"required":true},{"default":"","description":"The moniker for the deployment.","hasOptions":false,"label":"","name":"moniker","options":[],"pinned":false,"required":true},{"default":"","description":"The vpc_id for the moniker deployment. defaults to \"\" and when empty will be filtered based on tag \"adsk:moniker\"","hasOptions":false,"label":"","name":"vpc_id","options":[],"pinned":false,"required":false},{"default":"ec2","description":"Where / what the back end service for this LB will be. Constrains several other variables, such as vpc_id. One of: \"ec2\", \"fargate\", \"ecs\", \"fe\"","hasOptions":false,"label":"","name":"target_type","options":[],"pinned":false,"required":true},{"default":"","description":"Name of the LB","hasOptions":false,"label":"","name":"name","options":[],"pinned":false,"required":true},{"default":"{\"value\":[]}","description":"A list of aliases for CIDR blocks for networks allowed to access the LB. Used when configuring its security groups. Options: public, private, pat, apigee-dev, apigee-stg, apigee-prd","hasOptions":false,"label":"","name":"accessible_networks","options":[],"pinned":false,"required":true},{"default":"false","description":"Publish S3 logs to the observability account for SLO dashboard creation.","hasOptions":false,"label":"","name":"enable_observability","options":[],"pinned":false,"required":true},{"default":"{\"value\":[]}","description":"A list of CIDR blocks that are permitted access to the LB. Or-ed together with the accessible_networks.","hasOptions":false,"label":"","name":"custom_ingress_cidr_blocks","options":[],"pinned":false,"required":false},{"default":"false","description":"'true' if the LB is intended to be internal (ie a 10.x IP address on a VPC); 'false' for LBs with public IP addresses","hasOptions":false,"label":"","name":"internal","options":[],"pinned":false,"required":true},{"default":60,"description":"The time in seconds that the connection is allowed to be idle. Only valid for Load Balancers of type application","hasOptions":false,"label":"","name":"idle_timeout","options":[],"pinned":false,"required":true},{"default":"","description":"IP port number for the LB's external connection","hasOptions":false,"label":"","name":"port","options":[],"pinned":false,"required":true},{"default":"","description":"IP protocol for clients to connect to the LB. Options are: TCP, TLS, UDP, TCP_UDP, HTTP and HTTPS","hasOptions":false,"label":"","name":"protocol","options":[],"pinned":false,"required":true},{"default":"","description":"ARN for a TLS certificate uploaded into the target account for use by the LB. Either certificate_arn or certificate_arns is allowed, but not both.","hasOptions":false,"label":"","name":"certificate_arn","options":[],"pinned":false,"required":false},{"default":"{\"value\":[]}","description":"A list of ARNs for TLS certificates uploaded into the target account for use by the LB. The first one in the list is the default one; the others are added as extra certificates.","hasOptions":false,"label":"","name":"certificate_arns","options":[],"pinned":false,"required":false},{"default":"","description":"One of the TLS security policies allowed by AWS, for purposes of negotiating encryption with a client. ","hasOptions":false,"label":"","name":"tls_security_policy","options":[],"pinned":false,"required":true},{"default":"true","description":"If this is true, then port 80 on the same LB will automatically have a redirect rule to this port with protocol HTTPS added.","hasOptions":false,"label":"","name":"redirect","options":[],"pinned":false,"required":true},{"default":"{}","description":"A dictionary for the primary target group for the back end of the LB.","hasOptions":false,"label":"","name":"default_target_group","options":[],"pinned":false,"required":true},{"default":"{\"value\":[]}","description":"A list of additional target groups for the back end of the LB","hasOptions":false,"label":"","name":"additional_target_groups","options":[],"pinned":false,"required":false},{"default":"{\"value\":[]}","description":"A list of additional security groups in the account permitted access to the LB.","hasOptions":false,"label":"","name":"additional_security_group_names","options":[],"pinned":false,"required":false},{"default":"","description":"Terraform state s3 bucket name for both lb and dns","hasOptions":false,"label":"","name":"bucket","options":[],"pinned":false,"required":true},{"default":"","description":"s3 bucket key for lb state files","hasOptions":false,"label":"","name":"alb_key","options":[],"pinned":false,"required":true},{"default":"","description":"s3 bucket key for dns state files","hasOptions":false,"label":"","name":"dns_key","options":[],"pinned":false,"required":true},{"default":"","description":"Name of the sub zone to create under cloudos.autodesk.com","hasOptions":false,"label":"","name":"app_zone_name","options":[],"pinned":false,"required":false},{"default":"","description":"Specify if record is to be added in customer owned zone","hasOptions":false,"label":"","name":"zone_name","options":[],"pinned":false,"required":false},{"default":"lb-output.json","description":"Name of the output artifact generated by this pipeline","hasOptions":false,"label":"","name":"output_artifact_name","options":[],"pinned":false,"required":false},{"default":"{}","description":"Additional tags to be assigned to the resouces","hasOptions":false,"label":"","name":"additional_tags","options":[],"pinned":false,"required":false},{"default":"{\"value\":[]}","description":"Additional listener rules to be applied to the ALB listeners. There are lots of possible formats for these entries -- see https://git.autodesk.com/forge-cd-services/tf-modules-alb/blob/master/alb.tf#L561-L615 and nearby. An example: { \"action\": { \"type\": \"forward\", \"target_group\": \"target-group-name\", (optional)\"conditions\": [ { \"type\": \"host_header\": [\"array-of-host-names\"] } ] } }","hasOptions":false,"label":"","name":"additional_rules","options":[],"pinned":false,"required":false},{"default":"false","description":"If this is 'true' then FIPS will be enabled at the LB creation. It is only effective at creation time. Enabling this option on an existing LB doesn't enable FIPS.","hasOptions":false,"label":"","name":"enable_fips","options":[],"pinned":false,"required":false},{"default":"{\"value\":[]}","description":"Egress Rules for Backend Security Group","hasOptions":false,"label":"","name":"backend_egress_rules","options":[],"pinned":false,"required":false},{"default":"HTTP1","description":"Protocol Version - HTTP1or HTTP2 or GRPC","hasOptions":false,"label":"","name":"protocol_version","options":[],"pinned":false,"required":false},{"default":"{\"value\":[]}","description":"Egress Rules for ALB Security Group","hasOptions":false,"label":"","name":"alb_egress_rules","options":[],"pinned":false,"required":false},""],"spinLibJsonnetVersion":"0.0.0","stages":[{"artifactContents":[{"contents":"${#toJson({\n\"business_service\": parameters.business_service,\n\"region\": parameters.region,\n\"env\": parameters.env,\n\"pipeline_name\": parameters.pipeline_name,\n\"account\": parameters.account,\n\"role_arn\": parameters.role_arn,\n\"moniker\": parameters.moniker,\n\"vpc_id\": parameters.vpc_id,\n\"target_type\": parameters.target_type,\n\"name\": parameters.name,\n\"accessible_networks\":  #readJson(parameters.accessible_networks)[\"value\"],\n\"enable_observability\": #toBoolean(parameters.enable_observability),\n\"custom_ingress_cidr_blocks\": #readJson(parameters.custom_ingress_cidr_blocks)[\"value\"],\n\"internal\": #toBoolean(parameters.internal),\n\"port\": parameters.port,\n\"protocol\": parameters.protocol,\n\"protocol_version\": parameters.protocol_version,\n\"certificate_arn\": parameters.certificate_arn,\n\"certificate_arns\": #readJson(parameters.certificate_arns)[\"value\"],\n\"tls_security_policy\": parameters.tls_security_policy,\n\"redirect\": #toBoolean(parameters.redirect),\n\"default_target_group\": #readJson(parameters.default_target_group),\n\"additional_target_groups\": #readJson(parameters.additional_target_groups)[\"value\"],\n\"additional_security_group_names\": #readJson(parameters.additional_security_group_names)[\"value\"],\n\"app_zone_name\": parameters.app_zone_name,\n\"alb_name\": parameters.name,\n\"zone_name\": parameters.zone_name,\n\"additional_tags\": #readJson(parameters.additional_tags),\n\"additional_rules\": #readJson(parameters.additional_rules)[\"value\"],\n\"backend_egress_rules\": #readJson(parameters.backend_egress_rules)[\"value\"],\n\"alb_egress_rules\": #readJson(parameters.alb_egress_rules)[\"value\"],\n\"idle_timeout\": #toInt(parameters.idle_timeout)\n,\n\"enable_fips\": #toBoolean(parameters.enable_fips)\n})}","id":"ab75488a7011b24ef034576090ac9151","name":"lb.tfvars.json"},{"contents":"${#toJson({\n\"bucket\":parameters.bucket,\n\"key\":parameters.alb_key,\n\"region\": parameters.region,\n\"role_arn\": parameters.role_arn\n})}","id":"d2ef0f8aa23df115938156eee27fe68d","name":"lb.backend.json"},{"contents":"${#toJson({\n\"bucket\":parameters.bucket,\n\"key\":parameters.dns_key,\n\"region\": parameters.region,\n\"role_arn\": parameters.role_arn\n})}","id":"70e508a483a1fd87d1036249f709d1b8","name":"dns.backend.json"}],"expectedArtifacts":[{"defaultArtifact":{},"displayName":"lb.tfvars.json","id":"ab75488a7011b24ef034576090ac9151","matchArtifact":{"artifactAccount":"embedded-artifact","name":"lb.tfvars.json","reference":"","type":"embedded/base64"},"useDefaultArtifact":false,"usePriorArtifact":false},{"defaultArtifact":{},"displayName":"lb.backend.json","id":"d2ef0f8aa23df115938156eee27fe68d","matchArtifact":{"artifactAccount":"embedded-artifact","name":"lb.backend.json","reference":"","type":"embedded/base64"},"useDefaultArtifact":false,"usePriorArtifact":false},{"defaultArtifact":{},"displayName":"dns.backend.json","id":"70e508a483a1fd87d1036249f709d1b8","matchArtifact":{"artifactAccount":"embedded-artifact","name":"dns.backend.json","reference":"","type":"embedded/base64"},"useDefaultArtifact":false,"usePriorArtifact":false}],"failOnFailedExpressions":true,"name":"Evaluating tfvars and backend files","refId":"1","requisiteStageRefIds":[],"tfArtifactList":[{"contents":"${#toJson({\n\"business_service\": parameters.business_service,\n\"region\": parameters.region,\n\"env\": parameters.env,\n\"pipeline_name\": parameters.pipeline_name,\n\"account\": parameters.account,\n\"role_arn\": parameters.role_arn,\n\"moniker\": parameters.moniker,\n\"vpc_id\": parameters.vpc_id,\n\"target_type\": parameters.target_type,\n\"name\": parameters.name,\n\"accessible_networks\":  #readJson(parameters.accessible_networks)[\"value\"],\n\"enable_observability\": #toBoolean(parameters.enable_observability),\n\"custom_ingress_cidr_blocks\": #readJson(parameters.custom_ingress_cidr_blocks)[\"value\"],\n\"internal\": #toBoolean(parameters.internal),\n\"port\": parameters.port,\n\"protocol\": parameters.protocol,\n\"protocol_version\": parameters.protocol_version,\n\"certificate_arn\": parameters.certificate_arn,\n\"certificate_arns\": #readJson(parameters.certificate_arns)[\"value\"],\n\"tls_security_policy\": parameters.tls_security_policy,\n\"redirect\": #toBoolean(parameters.redirect),\n\"default_target_group\": #readJson(parameters.default_target_group),\n\"additional_target_groups\": #readJson(parameters.additional_target_groups)[\"value\"],\n\"additional_security_group_names\": #readJson(parameters.additional_security_group_names)[\"value\"],\n\"app_zone_name\": parameters.app_zone_name,\n\"alb_name\": parameters.name,\n\"zone_name\": parameters.zone_name,\n\"additional_tags\": #readJson(parameters.additional_tags),\n\"additional_rules\": #readJson(parameters.additional_rules)[\"value\"],\n\"backend_egress_rules\": #readJson(parameters.backend_egress_rules)[\"value\"],\n\"alb_egress_rules\": #readJson(parameters.alb_egress_rules)[\"value\"],\n\"idle_timeout\": #toInt(parameters.idle_timeout)\n,\n\"enable_fips\": #toBoolean(parameters.enable_fips)\n})}","id":"ab75488a7011b24ef034576090ac9151","name":"lb.tfvars.json"},{"contents":"${#toJson({\n\"bucket\":parameters.bucket,\n\"key\":parameters.alb_key,\n\"region\": parameters.region,\n\"role_arn\": parameters.role_arn\n})}","id":"d2ef0f8aa23df115938156eee27fe68d","name":"lb.backend.json"},{"contents":"${#toJson({\n\"bucket\":parameters.bucket,\n\"key\":parameters.dns_key,\n\"region\": parameters.region,\n\"role_arn\": parameters.role_arn\n})}","id":"70e508a483a1fd87d1036249f709d1b8","name":"dns.backend.json"}],"type":"evaluateArtifacts"},{"action":"plan","artifacts":[{"account":"gitrepo","artifact":{"artifactAccount":"gitrepo","name":"Terraform LB Module","reference":"https://git.autodesk.com/forge-cd-services/tf-modules-alb.git","type":"git/repo","version":"v0.1.37"}},{"contents":"${#toJson({\n\"business_service\": parameters.business_service,\n\"region\": parameters.region,\n\"env\": parameters.env,\n\"pipeline_name\": parameters.pipeline_name,\n\"account\": parameters.account,\n\"role_arn\": parameters.role_arn,\n\"moniker\": parameters.moniker,\n\"vpc_id\": parameters.vpc_id,\n\"target_type\": parameters.target_type,\n\"name\": parameters.name,\n\"accessible_networks\":  #readJson(parameters.accessible_networks)[\"value\"],\n\"enable_observability\": #toBoolean(parameters.enable_observability),\n\"custom_ingress_cidr_blocks\": #readJson(parameters.custom_ingress_cidr_blocks)[\"value\"],\n\"internal\": #toBoolean(parameters.internal),\n\"port\": parameters.port,\n\"protocol\": parameters.protocol,\n\"protocol_version\": parameters.protocol_version,\n\"certificate_arn\": parameters.certificate_arn,\n\"certificate_arns\": #readJson(parameters.certificate_arns)[\"value\"],\n\"tls_security_policy\": parameters.tls_security_policy,\n\"redirect\": #toBoolean(parameters.redirect),\n\"default_target_group\": #readJson(parameters.default_target_group),\n\"additional_target_groups\": #readJson(parameters.additional_target_groups)[\"value\"],\n\"additional_security_group_names\": #readJson(parameters.additional_security_group_names)[\"value\"],\n\"app_zone_name\": parameters.app_zone_name,\n\"alb_name\": parameters.name,\n\"zone_name\": parameters.zone_name,\n\"additional_tags\": #readJson(parameters.additional_tags),\n\"additional_rules\": #readJson(parameters.additional_rules)[\"value\"],\n\"backend_egress_rules\": #readJson(parameters.backend_egress_rules)[\"value\"],\n\"alb_egress_rules\": #readJson(parameters.alb_egress_rules)[\"value\"],\n\"idle_timeout\": #toInt(parameters.idle_timeout)\n,\n\"enable_fips\": #toBoolean(parameters.enable_fips)\n})}","id":"ab75488a7011b24ef034576090ac9151","name":"lb.tfvars.json"}],"backendArtifact":{"contents":"${#toJson({\n\"bucket\":parameters.bucket,\n\"key\":parameters.alb_key,\n\"region\": parameters.region,\n\"role_arn\": parameters.role_arn\n})}","id":"d2ef0f8aa23df115938156eee27fe68d","name":"lb.backend.json"},"dir":"./","name":"Resource Provisioning lb - plan","nameSuffix":"lb - plan","overrides":{},"profile":"","refId":"2","requisiteStageRefIds":["1"],"targets":[],"terraformVersion":"0.12.31","type":"terraform","workspace":""},{"action":"apply","artifacts":[{"account":"gitrepo","artifact":{"artifactAccount":"gitrepo","name":"Terraform LB Module","reference":"https://git.autodesk.com/forge-cd-services/tf-modules-alb.git","type":"git/repo","version":"v0.1.37"}},{"contents":"${#toJson({\n\"business_service\": parameters.business_service,\n\"region\": parameters.region,\n\"env\": parameters.env,\n\"pipeline_name\": parameters.pipeline_name,\n\"account\": parameters.account,\n\"role_arn\": parameters.role_arn,\n\"moniker\": parameters.moniker,\n\"vpc_id\": parameters.vpc_id,\n\"target_type\": parameters.target_type,\n\"name\": parameters.name,\n\"accessible_networks\":  #readJson(parameters.accessible_networks)[\"value\"],\n\"enable_observability\": #toBoolean(parameters.enable_observability),\n\"custom_ingress_cidr_blocks\": #readJson(parameters.custom_ingress_cidr_blocks)[\"value\"],\n\"internal\": #toBoolean(parameters.internal),\n\"port\": parameters.port,\n\"protocol\": parameters.protocol,\n\"protocol_version\": parameters.protocol_version,\n\"certificate_arn\": parameters.certificate_arn,\n\"certificate_arns\": #readJson(parameters.certificate_arns)[\"value\"],\n\"tls_security_policy\": parameters.tls_security_policy,\n\"redirect\": #toBoolean(parameters.redirect),\n\"default_target_group\": #readJson(parameters.default_target_group),\n\"additional_target_groups\": #readJson(parameters.additional_target_groups)[\"value\"],\n\"additional_security_group_names\": #readJson(parameters.additional_security_group_names)[\"value\"],\n\"app_zone_name\": parameters.app_zone_name,\n\"alb_name\": parameters.name,\n\"zone_name\": parameters.zone_name,\n\"additional_tags\": #readJson(parameters.additional_tags),\n\"additional_rules\": #readJson(parameters.additional_rules)[\"value\"],\n\"backend_egress_rules\": #readJson(parameters.backend_egress_rules)[\"value\"],\n\"alb_egress_rules\": #readJson(parameters.alb_egress_rules)[\"value\"],\n\"idle_timeout\": #toInt(parameters.idle_timeout)\n,\n\"enable_fips\": #toBoolean(parameters.enable_fips)\n})}","id":"ab75488a7011b24ef034576090ac9151","name":"lb.tfvars.json"}],"backendArtifact":{"contents":"${#toJson({\n\"bucket\":parameters.bucket,\n\"key\":parameters.alb_key,\n\"region\": parameters.region,\n\"role_arn\": parameters.role_arn\n})}","id":"d2ef0f8aa23df115938156eee27fe68d","name":"lb.backend.json"},"dir":"./","name":"Resource Provisioning lb - apply","nameSuffix":"lb - apply","overrides":{},"profile":"","refId":"3","requisiteStageRefIds":["2"],"stageEnabled":{"expression":"${#stage('Resource Provisioning lb - plan')['context']['status']['code'] == 2}","type":"expression"},"targets":[],"terraformVersion":"0.12.31","type":"terraform","workspace":""},{"action":"output","artifacts":[{"account":"gitrepo","artifact":{"artifactAccount":"gitrepo","name":"Terraform LB Module","reference":"https://git.autodesk.com/forge-cd-services/tf-modules-alb.git","type":"git/repo","version":"v0.1.37"}},{"contents":"${#toJson({\n\"business_service\": parameters.business_service,\n\"region\": parameters.region,\n\"env\": parameters.env,\n\"pipeline_name\": parameters.pipeline_name,\n\"account\": parameters.account,\n\"role_arn\": parameters.role_arn,\n\"moniker\": parameters.moniker,\n\"vpc_id\": parameters.vpc_id,\n\"target_type\": parameters.target_type,\n\"name\": parameters.name,\n\"accessible_networks\":  #readJson(parameters.accessible_networks)[\"value\"],\n\"enable_observability\": #toBoolean(parameters.enable_observability),\n\"custom_ingress_cidr_blocks\": #readJson(parameters.custom_ingress_cidr_blocks)[\"value\"],\n\"internal\": #toBoolean(parameters.internal),\n\"port\": parameters.port,\n\"protocol\": parameters.protocol,\n\"protocol_version\": parameters.protocol_version,\n\"certificate_arn\": parameters.certificate_arn,\n\"certificate_arns\": #readJson(parameters.certificate_arns)[\"value\"],\n\"tls_security_policy\": parameters.tls_security_policy,\n\"redirect\": #toBoolean(parameters.redirect),\n\"default_target_group\": #readJson(parameters.default_target_group),\n\"additional_target_groups\": #readJson(parameters.additional_target_groups)[\"value\"],\n\"additional_security_group_names\": #readJson(parameters.additional_security_group_names)[\"value\"],\n\"app_zone_name\": parameters.app_zone_name,\n\"alb_name\": parameters.name,\n\"zone_name\": parameters.zone_name,\n\"additional_tags\": #readJson(parameters.additional_tags),\n\"additional_rules\": #readJson(parameters.additional_rules)[\"value\"],\n\"backend_egress_rules\": #readJson(parameters.backend_egress_rules)[\"value\"],\n\"alb_egress_rules\": #readJson(parameters.alb_egress_rules)[\"value\"],\n\"idle_timeout\": #toInt(parameters.idle_timeout)\n,\n\"enable_fips\": #toBoolean(parameters.enable_fips)\n})}","id":"ab75488a7011b24ef034576090ac9151","name":"lb.tfvars.json"}],"backendArtifact":{"contents":"${#toJson({\n\"bucket\":parameters.bucket,\n\"key\":parameters.alb_key,\n\"region\": parameters.region,\n\"role_arn\": parameters.role_arn\n})}","id":"d2ef0f8aa23df115938156eee27fe68d","name":"lb.backend.json"},"dir":"./","name":"Resource Provisioning lb - output","nameSuffix":"lb - output","overrides":{},"profile":"","refId":"4","requisiteStageRefIds":["3"],"savePlanOutput":true,"targets":[],"terraformVersion":"0.12.31","type":"terraform","workspace":""},{"action":"plan","artifacts":[{"account":"gitrepo","artifact":{"artifactAccount":"gitrepo","name":"Terraform DNS Module","reference":"https://git.autodesk.com/forge-cd-services/tf-modules-dns.git","type":"git/repo","version":"v0.1.5"}},{"contents":"${#toJson({\n\"business_service\": parameters.business_service,\n\"region\": parameters.region,\n\"env\": parameters.env,\n\"pipeline_name\": parameters.pipeline_name,\n\"account\": parameters.account,\n\"role_arn\": parameters.role_arn,\n\"moniker\": parameters.moniker,\n\"vpc_id\": parameters.vpc_id,\n\"target_type\": parameters.target_type,\n\"name\": parameters.name,\n\"accessible_networks\":  #readJson(parameters.accessible_networks)[\"value\"],\n\"enable_observability\": #toBoolean(parameters.enable_observability),\n\"custom_ingress_cidr_blocks\": #readJson(parameters.custom_ingress_cidr_blocks)[\"value\"],\n\"internal\": #toBoolean(parameters.internal),\n\"port\": parameters.port,\n\"protocol\": parameters.protocol,\n\"protocol_version\": parameters.protocol_version,\n\"certificate_arn\": parameters.certificate_arn,\n\"certificate_arns\": #readJson(parameters.certificate_arns)[\"value\"],\n\"tls_security_policy\": parameters.tls_security_policy,\n\"redirect\": #toBoolean(parameters.redirect),\n\"default_target_group\": #readJson(parameters.default_target_group),\n\"additional_target_groups\": #readJson(parameters.additional_target_groups)[\"value\"],\n\"additional_security_group_names\": #readJson(parameters.additional_security_group_names)[\"value\"],\n\"app_zone_name\": parameters.app_zone_name,\n\"alb_name\": parameters.name,\n\"zone_name\": parameters.zone_name,\n\"additional_tags\": #readJson(parameters.additional_tags),\n\"additional_rules\": #readJson(parameters.additional_rules)[\"value\"],\n\"backend_egress_rules\": #readJson(parameters.backend_egress_rules)[\"value\"],\n\"alb_egress_rules\": #readJson(parameters.alb_egress_rules)[\"value\"],\n\"idle_timeout\": #toInt(parameters.idle_timeout)\n,\n\"enable_fips\": #toBoolean(parameters.enable_fips)\n})}","id":"ab75488a7011b24ef034576090ac9151","name":"lb.tfvars.json"}],"backendArtifact":{"contents":"${#toJson({\n\"bucket\":parameters.bucket,\n\"key\":parameters.dns_key,\n\"region\": parameters.region,\n\"role_arn\": parameters.role_arn\n})}","id":"70e508a483a1fd87d1036249f709d1b8","name":"dns.backend.json"},"dir":"./","name":"Resource Provisioning dns - plan","nameSuffix":"dns - plan","overrides":{"alb_arn":"${execution.stages.?[name matches 'Resource Provisioning lb - output'].![#this.context.status.outputs.alb_arn.value][0].toString()}","dnssec_enabled":"${#toBoolean(parameters.enable_fips)}"},"profile":"","refId":"5","requisiteStageRefIds":["4"],"stageEnabled":{"expression":"trigger['parameters']['target_type'] ==\"ecs\" || trigger['parameters']['target_type'] ==\"fargate\"","type":"expression"},"targets":[],"terraformVersion":"0.12.31","type":"terraform","workspace":""},{"action":"apply","artifacts":[{"account":"gitrepo","artifact":{"artifactAccount":"gitrepo","name":"Terraform DNS Module","reference":"https://git.autodesk.com/forge-cd-services/tf-modules-dns.git","type":"git/repo","version":"v0.1.5"}},{"contents":"${#toJson({\n\"business_service\": parameters.business_service,\n\"region\": parameters.region,\n\"env\": parameters.env,\n\"pipeline_name\": parameters.pipeline_name,\n\"account\": parameters.account,\n\"role_arn\": parameters.role_arn,\n\"moniker\": parameters.moniker,\n\"vpc_id\": parameters.vpc_id,\n\"target_type\": parameters.target_type,\n\"name\": parameters.name,\n\"accessible_networks\":  #readJson(parameters.accessible_networks)[\"value\"],\n\"enable_observability\": #toBoolean(parameters.enable_observability),\n\"custom_ingress_cidr_blocks\": #readJson(parameters.custom_ingress_cidr_blocks)[\"value\"],\n\"internal\": #toBoolean(parameters.internal),\n\"port\": parameters.port,\n\"protocol\": parameters.protocol,\n\"protocol_version\": parameters.protocol_version,\n\"certificate_arn\": parameters.certificate_arn,\n\"certificate_arns\": #readJson(parameters.certificate_arns)[\"value\"],\n\"tls_security_policy\": parameters.tls_security_policy,\n\"redirect\": #toBoolean(parameters.redirect),\n\"default_target_group\": #readJson(parameters.default_target_group),\n\"additional_target_groups\": #readJson(parameters.additional_target_groups)[\"value\"],\n\"additional_security_group_names\": #readJson(parameters.additional_security_group_names)[\"value\"],\n\"app_zone_name\": parameters.app_zone_name,\n\"alb_name\": parameters.name,\n\"zone_name\": parameters.zone_name,\n\"additional_tags\": #readJson(parameters.additional_tags),\n\"additional_rules\": #readJson(parameters.additional_rules)[\"value\"],\n\"backend_egress_rules\": #readJson(parameters.backend_egress_rules)[\"value\"],\n\"alb_egress_rules\": #readJson(parameters.alb_egress_rules)[\"value\"],\n\"idle_timeout\": #toInt(parameters.idle_timeout)\n,\n\"enable_fips\": #toBoolean(parameters.enable_fips)\n})}","id":"ab75488a7011b24ef034576090ac9151","name":"lb.tfvars.json"}],"backendArtifact":{"contents":"${#toJson({\n\"bucket\":parameters.bucket,\n\"key\":parameters.dns_key,\n\"region\": parameters.region,\n\"role_arn\": parameters.role_arn\n})}","id":"70e508a483a1fd87d1036249f709d1b8","name":"dns.backend.json"},"dir":"./","name":"Resource Provisioning dns - apply","nameSuffix":"dns - apply","overrides":{"alb_arn":"${execution.stage